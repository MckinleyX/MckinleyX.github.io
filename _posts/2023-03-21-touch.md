---
title: "A funny network issue"
excerpt_separator: "<!--more-->"
categories:
  - Blog
tags:
  - Linux
---
So I had an interesting issue recently.

When doing a system update, I ran into this error:
```
$ sudo pacman -Syu
...truncated...
( 6/10) Updating 32-bit fontconfig cache...
Fontconfig error: failed reading config file: /etc/fonts/conf.d:  (errno 21)
Fontconfig error: failed reading config file: /usr/share/fontconfig/conf.avail:  (errno 21)
...truncated...
```
<!--more-->

So after some Googling, we find that its a result of 
[this issue](https://bugs.archlinux.org/task/70305) -- somehow, the
access times in a bunch of our files have been changed to 2076!

We could manually `touch` all these files, but why do that, when
we can write a shell script?

Let's start with the basics:

```
$ find -H / | xargs stat -c '%n %x'

```
The `find -H /` command lists all files on the filesystem, and then
`xargs` runs the command `stat -c '%n %x` on those files.

`stat -c '%n %x'` itself gives the name and last access time of each
of its arguments.

Let's filter out for entries from 2076, and clean up our output to
just filenames:

```
$ find -H / | xargs stat -c '%n %x 2>&1 | grep 2076 | awk '{ print $1 }'
```

Finally, we have a list of filenames we need to fix the access
time of. We can do this with `xargs` and `touch`:

```
$ find -H / | xargs stat -c '%n %x 2>&1 | grep 2076 | awk '{ print $1 } | xargs sudo touch'
```

And voil√†! we are done!
